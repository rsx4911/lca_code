<!DOCTYPE html>
<html lang="en">

<head>
  <base href="/lca-collaboration/" />
  <title>LCA Collaboration Server</title>
  <meta http-equiv="expires" content="0" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="fragment" content="!" />
  <link rel="shortcut icon" type="image/x-icon" href="images/favicon1.ico" />
  <link rel="stylesheet" type="text/css" href="css/styles.css" />
</head>

<body class="login">

  <div class="official-website-banner">
    <div class="official-website-banner__message">
      <img src="./images/amflag.jpg" alt="">An official website of the United States government.
      <button class="official-website-banner__trigger content-collapsed"">Here&#39;s how you know.</button>
  </div>
  <div class=" official-website-banner__content" style="display:none;">
        <div class="content-region content-region__first">
          <img src="./images/icon-dot-gov.svg" alt="">
          <p><strong>The .gov means it&#39;s official.</strong><br>Federal government websites always use a .gov or .mil
            domain. Before sharing sensitive information online, make sure you&#39;re on a .gov or .mil site by
            inspecting your browser&#39;s address (or &quot;location&quot;) bar.</p>
        </div>
        <div class="content-region content-region__second">
          <img src="./images/icon-https.svg" alt="">
          <p>This site is also protected by an SSL (Secure Sockets Layer) certificate that&#39;s been signed by the U.S.
            government. The https:// means all transmitted data is encrypted &mdash; in other words, any information or
            browsing history that you provide is transmitted securely.</p>
        </div>
    </div>
  </div>
  <header class="drupal">
    <div class="container">
      <div class="row">
        <div class="col-xs-2 site-branding clearfix">
          <img alt="" class="site-branding__usda-logo" src="images/lca_logo.png">
          <span class="site-branding__site-name sr-only">Life Cycle Assessment Commons</span>
        </div>

        <nav class="navbar navbar-default col-md-10" id="navbar">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse"
              aria-expanded="false">
              <span>MENU</span>
            </button>
          </div>

          <div id="navbar-collapse" class="navbar-collapse collapse" aria-expanded="false" style="height: 1px;">
            <div class="region region-navigation-collapsible">
              <nav aria-labelledby="block-bootstrap-lca-main-menu-menu" id="block-bootstrap-lca-main-menu">
                <h2 class="sr-only" id="block-bootstrap-lca-main-menu-menu">Main navigation</h2>

                <ul class="menu menu--main nav navbar-nav">
                  <li class="first">
                    <a href="#" onclick="javascript:window.location.href='https://www.lcacommons.gov'"
                      data-drupal-link-system-path="<front>" class="is-active">Home</a>
                  </li>
                  <li class="expanded dropdown">
                    <a href="/about-us" class="dropdown-toggle" data-toggle="dropdown"
                      data-drupal-link-system-path="node/2">About Us <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                      <li class="first">
                        <a href="/about" data-drupal-link-system-path="/node/25" target="_blank">About LCA Commons</a>
                      </li>
                      <li class="last">
                        <a href="/memorandum-understanding-0" data-drupal-link-system-path="/node/24"
                          target="_blank">Memorandum of Understanding</a>
                      </li>
                    </ul>
                  </li>
                  <li class="expanded dropdown">
                    <a href="/data-documentation" class="dropdown-toggle" data-toggle="dropdown"
                      data-drupal-link-system-path="node/7">Documentation <span class="caret"></span></a>

                    <ul class="dropdown-menu">
                      <li class="first">
                        <a href="/draft-data-handbook" data-drupal-link-system-path="node/22" target="_blank">Draft Data
                          Handbook</a>
                      </li>
                      <li>
                        <a href="/openlca-collaboration-server" data-drupal-link-system-path="node/23"
                          target="_blank">openLCA Collaboration Server</a>
                      </li>
                      <li class="last">
                        <a href="/data-documentation" data-drupal-link-system-path="node/7" target="_blank">Agency Data
                          Catalogs</a>
                      </li>
                    </ul>
                  </li>
                  <li class="last">
                    <a href="/contact" target="_blank" data-drupal-link-system-path="contact">Contact</a>
                  </li>
                  <li><a class="login default-button" href="#"
                      onClick="javascript:window.location.href='login'"><span>Sign In</span></a></li>
                </ul>

              </nav>
            </div>
          </div>
        </nav>
      </div>
    </div>
  </header>

  <div id="main-login">
    <div id="login-description">
      <h3>Welcome to the LCA Collaboration Server!<br /><small>Manage LCA repositories with user specific access
          management that keeps your LCA data secure and enables collaboration. </small></h3>
    </div>
    <div id="login-container">
      <h3>Sign in</h3>
      <form id="login" method="post">
        <div id="login-general-message" role="alert" class="alert alert-danger"><span class="message"></span></div>
        <div id="username-group" class="form-group"><label for="username" class="control-label">Username</label><input
            id="username" name="username" type="text" class="form-control" /></div>
        <div id="password-group" class="form-group"><label for="password" class="control-label">Password</label><input
            id="password" name="password" type="password" class="form-control" /><a class="default-link"
            href="reset-password">Forgot your password?</a></div>
        <div id="token-group" class="form-group hidden"><label for="token" class="control-label">Token</label><input
            id="token" name="token" type="text" class="form-control" /><a href="login" class="default-link">Login with
            another user</a></div><button type="submit" class="btn btn-primary btn-block">Login</button>
        <div class="sign-up-link-container" style="display:none"> Don't have an account yet? <a class="default-link" href="sign-up">Sign
            up</a></div>
      </form>
      <form id="reset-password" method="post" style="display:none;">
        <h3>Reset password</h3>
        <div class="alert alert-success" id="reset-password-general-message" role="alert"><span class="message"></span>
        </div>
        <div class="form-group" id="email-group"><label class="control-label" for="email">E-Mail</label><input
            class="form-control" id="email" name="email" type="text" /><a class="default-link" href="login">Back to
            login</a></div><button class="btn btn-primary btn-block" id="reset" type="submit"
          disabled="disabled">Request password reset</button>
      </form>
      <form id="sign-up" method="post" style="display:none;">
        <h3>Sign up</h3>
        <div class="alert alert-danger" id="sign-up-general-message" role="alert"><span class="message"></span></div>
        <div class="form-group" id="username-group"><label class="control-label" for="username">Username</label><input
            class="form-control" id="username" name="username" type="text" placeholder="johndoe" /></div>
        <div class="form-group" id="email-group"><label class="control-label" for="email">E-Mail</label><input
            class="form-control" id="email" name="email" type="text" placeholder="john.doe@mail.me" /></div>
        <div class="form-group" id="name-group"><label class="control-label" for="name">Name</label><input
            class="form-control" id="name" name="name" type="text" placeholder="John doe" /></div>
        <div class="form-group" id="password-group"><label class="control-label" for="password">Password</label><input
            class="form-control" id="password" name="password" type="password" /></div>
        <div class="form-group" id="password2-group"><label class="control-label" for="password2">Password
            (repeat)</label><input class="form-control" id="password2" name="password2" type="password" /><a
            class="default-link" href="login">Login with existing user</a></div><button
          class="btn btn-primary btn-block" type="submit">Register</button>
      </form>
    </div>
  </div><br /><br /><br />
  <footer class="footer">
    <div class="footer__secondary-section">
      <div class="container">
        <ul>
          <li><a href="https://www.usda.gov/policies-and-links" target="_blank">Policies and Links</a></li>
          <li><a href="https://www.usda.gov/plain-writing" target="_blank">Plain Writing</a></li>
          <li><a href="https://www.dm.usda.gov/foia/" target="_blank">FOIA</a></li>
          <li><a href="https://www.usda.gov/accessibility-statement" target="_blank">Accessibility Statement</a></li>
          <li><a href="https://www.usda.gov/privacy-policy" target="_blank">Privacy Policy</a></li>
          <li><a href="https://www.usda.gov/non-discrimination-statement" target="_blank">Non-Discrimination
              Statement</a></li>
          <li><a href="https://www.ars.usda.gov/docs/quality-of-information/" target="_blank">Information Quality</a>
          </li>
          <li><a href="https://www.nal.usda.gov" target="_blank">National Agricultural Library</a></li>
          <li><a href="https://www.ars.usda.gov" target="_blank">Agricultural Research Service</a></li>
          <li><a href="https://www.usda.gov" target="_blank">USDA.gov</a></li>
          <li><a href="https://www.usa.gov" target="_blank">USA.gov</a></li>
          <li><a href="https://www.whitehouse.gov" target="_blank">WhiteHouse.gov</a></li>
        </ul>
      </div>
    </div>
  </footer>
  <script data-main="js/main" src="js/libs/require.js"></script>
  <script src="js/jquery.js"></script>
	<script>var show = function(subpage) {
		$('#login').hide()
		$('#login #username-group').removeClass('hidden')
		$('#login #password-group').removeClass('hidden')
		$('#login #token-group').addClass('hidden')
		$('#login #token').val('')
		$('#reset-password').hide()
		$('#sign-up').hide()
		$('#' + subpage).show()
	}
	var registerOnClickHandler = function(subpage) {
		$('a[href=' + subpage + ']').on('click', function(e) {
			e.preventDefault()
			window.location.href = subpage
		})
	}
	registerOnClickHandler('login')
	registerOnClickHandler('reset-password')
	registerOnClickHandler('sign-up')
	$.ajax({type: 'GET', url: 'ws/public/settings', success: function(settings) {
		if (settings['USER_REGISTRATION_ENABLED']) {
			$('.sign-up-link-container').show()
		}
	}})
	var type = window.location.pathname.substring(window.location.pathname.lastIndexOf('/') + 1)
	if (type === 'reset-password' || type === 'sign-up') {
		show(type)
	}
	$('#year').html(new Date().getFullYear())
	$('#reset-password #email').on('keyup', function() {
		$('#reset').attr('disabled', !/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test($('#email').val()))
	})
	$('#login').on('submit', function(event) {
		event.preventDefault()
		$('#login-general-message').hide()
		var data = {username: $('#login #username').val(), password: $('#login #password').val()}
		if ($('#login #token').is(':visible')) {
			data.token = $('#login #token').val()
		}
		$.ajax({type: 'POST', url: 'ws/public/login', contentType: 'application/json', data: JSON.stringify(data), 
			success: function(response) {
				if (response === 'tokenRequired') {
					$('#login #username-group').addClass('hidden')
					$('#login #password-group').addClass('hidden')
					$('#login #token-group').removeClass('hidden')
					$('#login-general-message').hide()
					$('#login #token').focus()
				} else {
					var params = Object.fromEntries(new URLSearchParams(window.location.search).entries());
					window.location.href = params.redirectUrl || ''
				}
			}, error: function(response) {
				$('#login-general-message').show()
				$('#login-general-message .message').html(response.responseJSON ? response.responseJSON.message : response.responseText)
				$('#login #token').val('')
			}
		})
		return false
	})
	$('#reset-password').on('submit', function(event) {
		event.preventDefault()
		$('#reset-password-general-message').hide()
		var data = {email: $('#reset-password #email').val()}
		$.ajax({type: 'POST', url: 'ws/public/request-password-reset', contentType: 'application/json', data: JSON.stringify(data), 
			success: function(response) {
				$('#reset, #reset-password #email').attr('disabled', true)
				$('#reset').removeClass('btn-primary').addClass('btn-success').html('Password reset requested')
			}
		})
		return false
	})
	$('#sign-up').on('submit', function(event) {
		event.preventDefault()
		$('#sign-up-general-message').hide()
		$('#sign-up .has-error').removeClass('has-error')
		var data = {username: $('#sign-up #username').val(), name: $('#sign-up #name').val(), email: $('#sign-up #email').val(), password: $('#sign-up #password').val(), password2: $('#sign-up #password2').val()}
		$.ajax({type: 'POST', url: 'ws/public/register', contentType: 'application/json', data: JSON.stringify(data), 
			success: function(response) {
				window.location.href = ''
			}, error: function(response) {
				var error = response.responseJSON
				$('#sign-up-general-message').show()
				$('#sign-up-general-message .message').html(error.message)
				if (error.field) {
					$('#sign-up #' + error.field).parent().addClass('has-error')
				}
	
			}
		})
		return false
	})</script>
</body>

</html>

